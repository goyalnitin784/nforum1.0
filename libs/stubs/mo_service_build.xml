<?xml version="1.0" encoding="UTF-8"?>

<project name="mo_service" default="generateStub" basedir=".">
	
	<property file="mo_service_build.properties" />
	
	<target name="clean" >
		<delete dir="${target.dir}" />
		<mkdir dir="${target.dir}" />
	</target>

	<path id="axis.classpath">
	  <fileset dir="${libs.dir}/jars/axis">
	    <include name="**/*.jar" />
	  </fileset>
	  <fileset dir="${libs.dir}/jars/test">
	    <include name="**/*.jar" />
	  </fileset>
	</path>
	
	<taskdef resource="axis-tasks.properties"
	  classpathref="axis.classpath" />
	
	<target name="generateStub" depends="clean">
		
		<mkdir dir="${axis.target.service.gen.dir}/src"/>
		<mkdir dir="${axis.target.service.gen.dir}/classes"/>
		
		<axis-wsdl2java
		  output="${axis.target.service.gen.dir}/src"
		  testcase="true"
		  verbose="true"
		  url="${axis.target.super.pnr.servie.wsdl}" >
		    <mapping
		      namespace="http://axis.apache.org/ns/interop"
		      package="interop" />
		</axis-wsdl2java>
		
		<axis-wsdl2java
		  output="${axis.target.service.gen.dir}/src"
		  testcase="true"
		  verbose="true"
		  url="${axis.target.yt.ref.servie.wsdl}" >
		    <mapping
		      namespace="http://axis.apache.org/ns/interop"
		      package="interop" />
		 </axis-wsdl2java>
		
		<javac
			srcdir="${axis.target.service.gen.dir}/src" 
			destdir="${axis.target.service.gen.dir}/classes" 
			debug="on" 
			memoryinitialsize="256m" 
			memorymaximumsize="1024m" 
			fork="true">
			<classpath refid="axis.classpath"   />
		</javac>
		
		<jar 
			destfile="${libs.dir}/jars/yatra/${jar.name}"
			basedir="${axis.target.service.gen.dir}/classes">
		</jar>
		
	</target>
</project>