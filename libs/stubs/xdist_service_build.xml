<?xml version="1.0" encoding="UTF-8"?>
<project name="xdist_service" default="generateStub" basedir=".">
	
	<property file="xdist_service_build.properties" />
	<property environment="env"/>
	<property name="environment" value="${env.environment}"/>
	
	<target name="clean" >
		<delete dir="${target.dir}" />
		<mkdir dir="${target.dir}" />
	</target>
	
	<path id="axis.classpath">
	  <fileset dir="${libs.dir}/jars/axis">
	    <include name="**/*.jar" />
	  </fileset>
	  <fileset dir="${libs.dir}/jars/test">
	    <include name="**/*.jar" />
	  </fileset>
	</path>
	
	<taskdef resource="axis-tasks.properties"
	  classpathref="axis.classpath" />
	
	<target name="generateStub" depends="clean">
		
		<mkdir dir="${axis.target.gen.dir}/src"/>
		<mkdir dir="${axis.target.gen.dir}/classes"/>
		
		<axis-wsdl2java
		  output="${axis.target.gen.dir}/src"
		  testcase="true"
		  verbose="true" 
		  url="${axis.target.wsdl}" >
		    <mapping
		      namespace="http://172.16.1.123:9090/services/spm/spm"
		      package="com.yatra.platform.service.xdist" />
		</axis-wsdl2java>
		
		<javac
			srcdir="${axis.target.gen.dir}/src" 
			destdir="${axis.target.gen.dir}/classes" 
			debug="on" 
			memoryinitialsize="256m" 
			memorymaximumsize="1024m" 
			fork="true">
			<classpath refid="axis.classpath"   />
			<!--classpath refid="classpath" /-->
		</javac>
		
		<jar 
			destfile="${libs.dir}/jars/yatra/${jar.name}"
			basedir="${axis.target.gen.dir}/classes">
		</jar>
		
	</target>
	
</project>